<!DOCTYPE html>
<html lang="en" xmlns: th="http://thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <title>All Users</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!--<link rel="stylesheet" type="text/css" href="style.css">-->
</head>
<body class="body-page">
<!-- Tabs or Pills can be used in a card with the help of .nav-{tabs|pills} and .card-header-{tabs|pills} classes -->
<style>
    .container-header-logout{
        /*margin-left: 1150px;*/
        padding-left: 1100px;
        height: 50px;
        display: flex;

    }
    .container-with-users-data{
        margin-top: 10px;
        /*margin-left: 30px;*/
        padding-left: 30px;
        display: flex;
       text-align: center;


    }
    .container-with-users-data-username-text{
        width: 370px;
        position: fixed;
    }
    .btn-outline-danger{
        margin-top: 5px;
        background-color: rgb(52,58,64);
        border-color: rgb(52, 58, 64);

    }
    .header{
        background-color: rgb(52,58,64);
        display: flex;


    }
    .flex-container{
        display: flex;
        width: 400px;
    }
    .flex-container-section{
        display: flex;
        height: 600px;
        width: 200px;
        background-color: rgb(242,242,242);
    }
    .table-header{
        margin-left: 400px;
        margin-top: 25px;
        width: 700px;
    }
    .nav{
        width: 800px;
        border-color: bisque;
    }
    .form-add-new-user{

        padding-left: 270px;
    }
    #profile{
        background-color: rgb(242,242,242);
    }
    .section-container{
        background-color: rgb(248,249,250);
    }
    .add-user {
        width: 500px;
        padding-left: 300px;
        background: #ebebe9;
    }
    /*h6 {
        margin-left: 300px;
    }

    .input-username, .input-surname, .input-password, .form-check-input, .form-check-label {
        margin-left: 250px;
    }*/

    .form-check-label {
        width: 150px;
    }
    .form-check-input {
        width: 20px;
    }


    html { overflow:  hidden; }

</style>

<header class="header">
    <div class="flex-container">
        <div class="container-with-users-data" th:each="data: ${infoTop}">
            <p style="color: white" class="container-with-users-data-username-text"><b style="color: white"><tr th:text="${data.getUsername()}">Username</tr></b> with roles:  <span th:text="${#strings.arrayJoin(data.getRoles(), ', ')}">ADMIN, USER</span></p>
        </div>
        <div class="container-header-logout"><a href="/logout"><button type="button" class="btn btn-outline-danger">Logout</button></a></div>
    </div>
</header>

<!--<header>
    <div class="row">
        <div class="col-10" th:each="data: ${infoTop}">
            <span th:text="${data.getUsername()}" style="font-weight: bold">User</span>
            <span>with roles:</span>
            <span th:text="${#strings.arrayJoin(data.getRoles(), ', ')}">ADMIN, USER</span>
        </div>
        <div class="col-2">
            <div class="align-right">
                <form th:method="POST" th:action="@{/logout}">
                    <input class="logout-button" type="submit" value="Logout">
                </form>
            </div>
        </div>
    </div>
</header>-->
<section>
    <div class="section-container">
        <div class="flex-container-section">

            <form class="table-header">
                <div>
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">All Users</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Add User</a>
                        </li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content">
                        <div class="tab-pane active" id="home" role="tabpanel" aria-labelledby="home-tab">
                            <table class="table table-striped table-bordered">
                            <thead class="thead-dark">
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Surname</th>
                                <th>Roles</th>
                                <th>Edit</th>
                                <th>Delete</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="user: ${users}">
                                <td th:text="${user.getId()}">ID</td>
                                <td th:text="${user.getName()}">Name</td>
                                <td th:text="${user.getSurname()}">Surname</td>
                                <td th:text="${user.getRoles()}">Roles</td>
                                <td>
                                    <button th:action="@{/admin/{id}/edit(id=${user.getId()})}" type="button" class="btn btn-primary">Edit</button>
                                </td>
                                <td>
                                    <button th:method="DELETE" th:action="@{/admin/{id}(id=${user.getId()})}" type="button" class="btn btn-primary">Delete</button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        </div>

                        <div class="tab-pane" id="profile" role="tabpanel" aria-labelledby="profile-tab">
<!--Add user-->
                            <form class="add-user" th:method="POST" th:action="@{/admin/create}" th:object="${user}">

                                <h6 th:for="username">First Name</h6>
                                <input class="input-username" name="username" th:id="username" th:value="${user.getUsername()}" type="text"/>

                                <h6 th:for="surname">Last Name</h6>
                                <input class="input-surname" name="surname" th:id="surname" th:value="${user.getUsername()}" type="text"/>

                                <h6 th:for="password">Password</h6>
                                <input class="input-password" name="password" th:id="password" th:value="${user.getUsername()}" type="password"/>

                                <h6>Roles</h6>
                                <ul>
                                    <li th:each="role : ${list}">
                                        <input class="form-check-input"
                                               type="checkbox"
                                               name="roles"
                                               th:field="*{roles}"
                                               th:value="${role.getId()}">
                                        <label class="form-check-label"
                                               th:for="${#ids.prev('roles')}"
                                               th:text="${role.toString()}">test</label>
                                    </li>
                                </ul>

                                <input class="login-button" th:action="@{/admin/create}" type="submit" value="Add New User">
                            </form>
                            <!--<form th:action="@{/admin/create}" th:object="${user}" method="post">
                                <div class="form-add-new-user">
                                <fieldset>
                                    <p>
                                        <label th:for="username" id="username">Имя:</label>
                                    <input type="text" name="username" th:id="username" th:value="${user.getUsername()}">
                                    </p>

                                    <p>
                                        <label th:for="surname" id="surname">Фамилия:</label>
                                    <input type="text" name="surname" th:id="surname" th:value="${user.getSurname()}"><br/>
                                    </p>

                                    <p>
                                        <label th:for="password" id="password">Пароль:</label>
                                    <input type="text" name="password" th:id="password" th:value="${user.getPassword()}"><br/>
                                    </p>

                                    <p>
                                        <label>Роль:</label>
                                    <div class="form-check form-switch">
                                        <p>  <input type="checkbox" name="roles"
                                                    th:each="role : ${list}"
                                                    th:text="${role.getRole()}"
                                                    th:value="${role.getId()}"
                                                    th:field="*{roles}"
                                        />
                                        </p>
                                    </div>
                                    </p>
                                </fieldset>
                                <button type="submit" th:action="@{/admin/create}" class="btn btn-success">Add User</button>
                            </div>


                            </form>-->
                           <!-- <div id="add-user">
                                <h6>Please fill all fields</h6>
                                <form class="add-user" th:method="POST" th:action="@{/admin/create}" th:object="${user}">

                                    <h6>First Name</h6>
                                    <input th:field="*{user.getUsername()}" type="text"/>

                                    <h6>Last Name</h6>
                                    <input th:field="*{user.getSurname()}" type="text"/>

                                    <h6>Age</h6>
                                    <input th:field="*{user.getPassword()}" type="password"/>

                                    <h6>Roles</h6>
                                    <ul>
                                        <li th:each="role : ${list}">
                                            <input class="form-check-input"
                                                   type="checkbox"
                                                   th:field="*{roles}"
                                                   th:value="${role.getId()}">
                                            <label class="form-check-label"
                                                   th:for="${#ids.prev('roles')}"
                                                   th:text="${role.getRole()}">test</label>
                                        </li>
                                    </ul>

                                    <input class="login-button" type="submit" value="Add New User">
                                </form>
                            </div>
-->
                        </div>


                    </div>
                </div>
            </form>

        </div>


    </div>
</section>





<!--
<form th:action="@{admin/create}">
    <button type="submit">Добавить нового пользователя</button>
</form>-->

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>
